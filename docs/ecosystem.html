<!DOCTYPE html>
<html class="writer-html5" lang="ja" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Node.jsエコシステムを体験しよう &mdash; 仕事ですぐに使えるTypeScript  ドキュメント</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="変数" href="variable.html" />
    <link rel="prev" title="前書き" href="preface.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> 仕事ですぐに使えるTypeScript
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">TypeScriptの世界を知る</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="preface.html">前書き</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Node.jsエコシステムを体験しよう</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id5">Node.jsのインストール</a></li>
<li class="toctree-l2"><a class="reference internal" href="#package-json-ts-node"><code class="docutils literal notranslate"><span class="pre">package.json</span></code> の作成と <code class="docutils literal notranslate"><span class="pre">ts-node</span></code> のインストール</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">プロジェクトフォルダ共有後の環境構築</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">インストールしたコマンドの実行</a></li>
<li class="toctree-l2"><a class="reference internal" href="#typescript">TypeScriptの環境設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">エディタ環境</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ts-nodetypescript">ts-nodeを使ったTypeScriptのコードの実行</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">まとめ</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TypeScriptの書き方</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="variable.html">変数</a></li>
<li class="toctree-l1"><a class="reference internal" href="primitive.html">プリミティブ型</a></li>
<li class="toctree-l1"><a class="reference internal" href="complex.html">複合型</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax.html">基本的な構文</a></li>
<li class="toctree-l1"><a class="reference internal" href="typing.html">基本的な型付け</a></li>
<li class="toctree-l1"><a class="reference internal" href="function.html">関数</a></li>
<li class="toctree-l1"><a class="reference internal" href="otherbuiltinobjects.html">その他の組み込み型・関数</a></li>
<li class="toctree-l1"><a class="reference internal" href="class.html">クラス</a></li>
<li class="toctree-l1"><a class="reference internal" href="async.html">非同期処理</a></li>
<li class="toctree-l1"><a class="reference internal" href="exception.html">例外処理</a></li>
<li class="toctree-l1"><a class="reference internal" href="module.html">モジュール</a></li>
<li class="toctree-l1"><a class="reference internal" href="console.html"><code class="docutils literal notranslate"><span class="pre">console.log</span></code>によるログ出力</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">中級のテクニック</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="generics.html">ジェネリクス</a></li>
<li class="toctree-l1"><a class="reference internal" href="functional.html">関数型指向のプログラミング</a></li>
<li class="toctree-l1"><a class="reference internal" href="class2.html">クラス上級編</a></li>
<li class="toctree-l1"><a class="reference internal" href="reactive.html">リアクティブ</a></li>
<li class="toctree-l1"><a class="reference internal" href="advance.html">高度なテクニック</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">環境ごとのTips（共通環境・ブラウザ以外）</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="prodenv.html">ソフトウェア開発の環境を考える</a></li>
<li class="toctree-l1"><a class="reference internal" href="baseenv.html">基本の環境構築</a></li>
<li class="toctree-l1"><a class="reference internal" href="libenv.html">ライブラリ開発のための環境設定</a></li>
<li class="toctree-l1"><a class="reference internal" href="clienv.html">CLIツール・ウェブサーバー作成のための環境設定</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci.html">CI（継続的インテグレーション）環境の構築</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy.html">成果物のデプロイ</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html">使用ライブラリのバージョン管理</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">環境ごとのTips（ブラウザ環境）</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="browserenv.html">ブラウザ環境</a></li>
<li class="toctree-l1"><a class="reference internal" href="browserobjects.html">ブラウザ関連の組み込み型</a></li>
<li class="toctree-l1"><a class="reference internal" href="react.html">Reactの環境構築</a></li>
<li class="toctree-l1"><a class="reference internal" href="vue.html">Vue.jsの環境構築</a></li>
<li class="toctree-l1"><a class="reference internal" href="webparcel.html">Parcelを使ったウェブ開発</a></li>
<li class="toctree-l1"><a class="reference internal" href="electron.html">Electronアプリケーションの作成</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="recommended.html">おすすめのパッケージ・ツール</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">貢献者</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">仕事ですぐに使えるTypeScript</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Node.jsエコシステムを体験しよう</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/ecosystem.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="node-js">
<h1>Node.jsエコシステムを体験しよう<a class="headerlink" href="#node-js" title="この見出しへのパーマリンク"></a></h1>
<p>TypeScriptはJavaScriptへの変換を目的として作られた言語です。公式の処理系がありますが、それで変換すると、JavaScriptが生成されます。勉強目的で実行するには、現在のところ、いくつかのオプションがあります。
このなかで、とりあえず安定して使えて、比較的簡単なのはts-nodeですね。</p>
<ul class="simple">
<li><p>TypeScriptのウェブサイトのplayground <a class="footnote-reference brackets" href="#id3" id="id1">1</a>: 公式のコンパイラで変換してブラウザで実行</p></li>
<li><p>tsc + Node.js: 公式のコンパイラで変換してからNode.jsで実行</p></li>
<li><p>babel + ts-loader + Node.js: Babel経由で公式のコンパイラで変換してからNode.jsで実行</p></li>
<li><p>babel + &#64;babel/preset-typescript + Node.js: Babelで型情報だけを落として簡易的に変換してNode.jsで実行</p></li>
<li><p>ts-node: TypeScriptを変換してそのままNode.jsで実行する処理系</p></li>
<li><p>Deno: TypeScriptをネイティブサポートした処理系（2020-05-13 に 1.0 がリリースされました <a class="footnote-reference brackets" href="#id4" id="id2">2</a> ）</p></li>
<li><p>Bun: 新しいJavaScript/TypeScriptの処理系</p></li>
</ul>
<p>Node.jsはJavaScriptにファイル入出力やウェブサーバー作成に必要なAPIなどを足した処理系です。
本章では、TypeScriptの環境整備をするとともに、Node.jsを核としたエコシステムの概要を説明します。
プログラミング言語を学んで書き始める場合、言語の知識だけではどうにもなりません。どこにソースコードを書き、どのようにビルドツールを動かし、どのように処理系を起動し、どのようにテストを行うかなど、言語周辺のエコシステムを学ばないと、どこから手をつけて良いかわかりません。本章で紹介するエコシステムの周辺ツールや設定ファイルは以下の通りです。</p>
<ul class="simple">
<li><p>Node.js: 処理系</p></li>
<li><p>npmコマンド: パッケージマネージャ</p></li>
<li><p>package.json: プロジェクトファイル</p>
<ul>
<li><p>依存パッケージの管理</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scripts</span></code> で開発用のタスクのランチャーとして利用</p></li>
</ul>
</li>
<li><p>npxコマンド: Node.js用のnpmパッケージで提供されているツールの実行</p></li>
<li><p>TypeScript関連のパッケージ</p>
<ul>
<li><p>tsc: TypeScriptのコンパイラ（プロジェクト用のTypeScriptの設定ファイルの作成）</p></li>
<li><p>ts-node: TypeScript変換しながら実行する、Node.jsのラッパーコマンド</p></li>
</ul>
</li>
</ul>
<p>まずはNode.jsをインストールしてnpmコマンドを使えるようにしてください。
なお、本章ではゼロから環境を構築していきますが、ハンズオンのチーム教育などで、構築済みの環境をシェアする場合には次の節は飛ばしてください。コードを書くスキルに対して、環境構築に必要なスキルは数倍難易度が高いです。エコシステムを完全に理解してツール間の連携を把握する必要があります。ただし、そのために必要な知識はコードを書いていくうちに学びます。どうしても難易度が高い作業が最初に来てしまい、苦手意識を広げてしまう原因になってしまいます。環境構築は、本章と、5章以降で取り扱うので、必要になったら戻って来てください。</p>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><a class="reference external" href="https://www.typescriptlang.org/play/index.html">https://www.typescriptlang.org/play/index.html</a></p>
</dd>
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p><a class="reference external" href="https://deno.land/v1">https://deno.land/v1</a></p>
</dd>
</dl>
<section id="id5">
<h2>Node.jsのインストール<a class="headerlink" href="#id5" title="この見出しへのパーマリンク"></a></h2>
<p>Node.jsは公式の <a class="reference external" href="https://nodejs.org">https://nodejs.org</a> からダウンロードしてください。あるいは、chocolateyやHomebrew、macportsなどのパッケージマネージャなどを使ってインストールすることも可能です。もし、複数のバージョンを切り替えて検証する場合にはnvmが利用できます。ただし、フロントエンド開発においては、コードは変換してから他の環境（ブラウザやらクラウドのサービス）上で実行されますし、基本的に後方互換性は高く、バージョン間の差もそこまでないため、最新のLTSをとりあえず入れておけば問題ないでしょう（ただし、AWS Lambdaなどの特定の環境での動作を確認したい場合はのぞく）。</p>
<div class="admonition-todo admonition" id="id6">
<p class="admonition-title">課題</p>
<p>あとで書く</p>
</div>
<p>Node.jsをインストールすると、標準のパッケージマネージャの npm もインストールされます。もしかしたらパッケージマネージャの種類によってはインストールされない場合もあるので、その場合は追加インストールしてください。</p>
<p>npmコマンドはパッケージのダウンロードのためにインターネットアクセスをします。もし、社内プロキシなどがある場合はnpmのインストール後に設定しておくのをおすすめします。</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">プロキシの設定</span><a class="headerlink" href="#id11" title="このコードへのパーマリンク"></a></div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm config <span class="nb">set</span> proxy http://アカウント名:パスワード@プロキシーのURL
npm config <span class="nb">set</span> https-proxy http://アカウント名:パスワード@プロキシーのURL
</pre></div>
</div>
</div>
</section>
<section id="package-json-ts-node">
<h2><code class="docutils literal notranslate"><span class="pre">package.json</span></code> の作成と <code class="docutils literal notranslate"><span class="pre">ts-node</span></code> のインストール<a class="headerlink" href="#package-json-ts-node" title="この見出しへのパーマリンク"></a></h2>
<p>最初に作業フォルダを作り、 <code class="docutils literal notranslate"><span class="pre">package.json</span></code> を作成します。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir try_ts
$ <span class="nb">cd</span> try_ts
$ npm init -y
<span class="o">{</span>
  <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;try_ts&quot;</span>,
  <span class="s2">&quot;version&quot;</span>: <span class="s2">&quot;1.0.0&quot;</span>,
  <span class="s2">&quot;description&quot;</span>: <span class="s2">&quot;&quot;</span>,
  <span class="s2">&quot;main&quot;</span>: <span class="s2">&quot;index.js&quot;</span>,
  <span class="s2">&quot;scripts&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;test&quot;</span>: <span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="o">}</span>,
  <span class="s2">&quot;keywords&quot;</span>: <span class="o">[]</span>,
  <span class="s2">&quot;author&quot;</span>: <span class="s2">&quot;&quot;</span>,
  <span class="s2">&quot;license&quot;</span>: <span class="s2">&quot;ISC&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">package.json</span></code> はNode.jsを使ったプロジェクトの核となるファイルです。
次のような情報が入ります。</p>
<ul class="simple">
<li><p>プロジェクト自身のさまざまな情報</p></li>
<li><p>プロジェクトが依存する(実行で必要、もしくは開発に必要)ライブラリの情報</p></li>
<li><p>プロジェクトのビルドやテスト実行など、プロジェクト開発に必要なタスクの実行</p></li>
</ul>
<p>他の人が行なっているプロジェクトのコードを見るときも、まずは <code class="docutils literal notranslate"><span class="pre">package.json</span></code> を起点に解析していくと効率よく探すことができます。
この <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">init</span></code> コマンドで作成される <code class="docutils literal notranslate"><span class="pre">package.json</span></code> は、とりあえずフォルダ名から付与された名前、固定のバージョン(1.0.0)、空の説明が入っています。
このファイルはパッケージのリポジトリであるnpmjs.orgにアップロードする際に必要な情報もすべて入ります。
仕事のコードやハンズオンのプロジェクトを間違って公開しないように(することもないと思いますが)、 <code class="docutils literal notranslate"><span class="pre">&quot;private&quot;:</span> <span class="pre">true</span></code> を書き足しておきましょう。</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;env&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;private&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
<span class="w">  </span><span class="p">:</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>次に必要なツールをインストールします。npm installで、ts-nodeとtypescriptを入れます。 <code class="docutils literal notranslate"><span class="pre">--save-dev</span></code> をつけると、開発に必要だが、リリースにはいらないという意味になります。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npm install --save-dev ts-node typescript
</pre></div>
</div>
<p>もし、本番環境でもts-nodeを使ってビルドしたい、ということがあれば <code class="docutils literal notranslate"><span class="pre">--save-dev</span></code> の代わりに <code class="docutils literal notranslate"><span class="pre">--save</span></code> をつけます。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npm install --save ts-node
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">package.json</span></code> を見ると、項目が追加されているのがわかりますね。また、 <code class="docutils literal notranslate"><span class="pre">package-lock.json</span></code> という、環境を構築したときの全ライブラリのバージョン情報が入ったファイルも生成されます。このファイルを手で修正することはありません。</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;ts-node&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^8.0.2&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;typescript&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^3.3.1&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>また、 <code class="docutils literal notranslate"><span class="pre">node_modules</span></code> フォルダができて必要なライブラリなどがインストールされていることがわかります。他の言語と異なり、基本的にNode.jsは現在いるフォルダ以外のところにインストールすることはありません（キャッシュはありますが）。複数プロジェクト掛け持ちしているときも、プロジェクト間でインストールするライブラリやツールのバージョンがずれることを心配する必要はありません。</p>
<p>プロジェクトをチーム間で共有するときは、この <code class="docutils literal notranslate"><span class="pre">package.json</span></code> があるフォルダをバージョン管理にシステムに入れます。ただし、 <code class="docutils literal notranslate"><span class="pre">node_modules</span></code> は配布する必要はありません。 <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> などに名前を入れておくと良いでしょう。</p>
</section>
<section id="id7">
<h2>プロジェクトフォルダ共有後の環境構築<a class="headerlink" href="#id7" title="この見出しへのパーマリンク"></a></h2>
<p>チーム内では、gitなどでプロジェクトのソースコードを共有します。JavaScript系のプロジェクトでは、その中に <code class="docutils literal notranslate"><span class="pre">package.json</span></code> と <code class="docutils literal notranslate"><span class="pre">package-lock.json</span></code> があり、デプロイ時に環境を作ったり、共有された人は環境を手元で再現したりするのが簡単にできます。</p>
<p>以下は、環境変数NODE_ENVが未設定またはproduction以外の場合の動作です。</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span></code></p></th>
<th class="head"><p>dependenciesとdevDependenciesの両方をインストールする。</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">--prod</span></code></p></td>
<td><p>dependenciesのみをインストールする。</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">ci</span></code></p></td>
<td><p>dependenciesとdevDependenciesの両方をインストールする。package-lock.jsonは更新しない。</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">ci</span> <span class="pre">--prod</span></code></p></td>
<td><p>dependenciesのみをインストールする。package-lock.jsonは更新しない。</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id8">
<h2>インストールしたコマンドの実行<a class="headerlink" href="#id8" title="この見出しへのパーマリンク"></a></h2>
<p>npmコマンドでインストールするパッケージは、プログラムから使うライブラリ以外に実行できるコマンドを含むものがあります。先ほどインストールしたtypescriptとts-nodeは両方ともこれを含みます。コマンドは、node_modules/.bin以下にインストールされています。これを直接相対パスで指定しても良いのですが、専用のコマンドもあります。</p>
<p>ts-nodeを気軽に試すREPL（1行ごとに実行されるインタプリタ）の実行もできます。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npx ts-node
&gt; console.log<span class="o">(</span><span class="s1">&#39;hello world&#39;</span><span class="o">)</span>
hello world
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">package.json</span></code> のscriptsのセクションに登録すると、npmコマンドを使って実行できます。</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;start&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ts-node&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>&quot;scripts&quot;にはオブジェクトを書き、その中にはコマンドが定義できます。ここでは <code class="docutils literal notranslate"><span class="pre">start</span></code> コマンドを定義しています。コマンドが実行されたときに実行されるコードを書けます。ここではnode_modules/.bin以下のコードをパスを設定せずに書くことができます。 <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">[コマンド名]</span></code> とシェルで実行すると、この <code class="docutils literal notranslate"><span class="pre">scripts</span></code> セクションのコマンドが実行されます。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npm run start
&gt; console.log<span class="o">(</span><span class="s1">&#39;hello world&#39;</span><span class="o">)</span>
hello world
</pre></div>
</div>
<p>だいたい、次のようなコマンドを定義することが多いです。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">start</span></code> / <code class="docutils literal notranslate"><span class="pre">serve</span></code>: パッケージがウェブアプリケーションを含む場合はこれを起動</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code>: テストを実行</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lint</span></code>: コードの品質チェックを行う</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build</span></code>: ビルドが必要なライブラリではビルドを実行して配布できるようにする</p></li>
</ul>
<p>ビルドツールや処理系、テスティングフレームワークなどは、プロジェクトによって千差万別ですが、この <code class="docutils literal notranslate"><span class="pre">scripts</span></code> セクションを読むと、どのようにソースコードを処理したり、テストしたりしているかがわかります。これは、プロジェクトのコードを読むための強い武器になります。</p>
<p>また、このコマンド実行まではWindowsだろうが、Linuxだろうが、macOSだろうが、どれでもポータブルに動作します。Node.jsとnpmコマンドさえあれば、開発機（Windows、macOS）、CIサーバー（Linux）、本番環境（Linux）で動作します。もちろん、中で動作させるプログラムに、Node.js以外のOSのコマンドを書くとそこのポータビリティは下がりますが、それに関してはおすすめパッケージの中でポータブルな <code class="docutils literal notranslate"><span class="pre">scripts</span></code> セクションを書くのに使えるパッケージを紹介します。</p>
</section>
<section id="typescript">
<h2>TypeScriptの環境設定<a class="headerlink" href="#typescript" title="この見出しへのパーマリンク"></a></h2>
<p>TypeScriptを使うには、いくつか設定が必要です。JavaScript系のツールのビルドは大きく分けて、2つのフェーズがあります。</p>
<ul class="simple">
<li><p>コンパイル: TypeScriptや最新のJavaScript文法で書かれたコードを、実行環境にあわせたJavaScriptに変換</p></li>
<li><p>バンドル: ソースコードは通常、整理しやすいクラスごと、コンポーネントごとといった単位で分けて記述します。配布時には1ファイルにまとめてダウンロードの高速化、無駄な使われてないコードの排除が行われます。</p></li>
</ul>
<p>前者のツールとしては、TypeScriptやBabelを使います。後者は、webpack、Browserify、Rollup、Parcelなどがあります。ただし、後者は大規模なアプリケーションでなければ必要ありませんので、5章以降で紹介します。</p>
<p>何も設定せずとも、TypeScriptのコンパイルは可能ですが、入力フォルダを設定したい、出力形式を調整したい、いくつかのデフォルトでオフになっている新しい機能を使いたいなどの場合は設定ファイル <code class="docutils literal notranslate"><span class="pre">tsconfig.json</span></code> を作成します。
このファイルの雛形はTypeScriptの処理系を使って生成できます。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npx tsc --init
message TS6071: Successfully created a tsconfig.json file.
</pre></div>
</div>
<p>あとはこのJSONファイルを編集すれば、コンパイラの動作を調整できます。
TypeScriptをNode.jsで実行するだけであれば細かい設定は不要ですが、4章ではオプションを使わないといけない文法にもついても紹介します。</p>
</section>
<section id="id9">
<h2>エディタ環境<a class="headerlink" href="#id9" title="この見出しへのパーマリンク"></a></h2>
<p>現在、一番簡単に設定できて、一番精度の高い補完・コードチェックが自動で行われるのがVisual Studio Codeです。Windowsユーザーも、Linuxユーザーも、macOSユーザーも、これをダウンロードしてインストールしておけば間違いありません。
何も拡張を入れなくても動作します。</p>
<p>プロジェクトごとの共通の設定も、.vscodeフォルダに設定を書いてリポジトリに入れるだけで簡単にシェアできる点も、プロジェクトで使うのに適しています。よりアドバンスな設定やツールに関しては環境構築の章で紹介します。</p>
</section>
<section id="ts-nodetypescript">
<h2>ts-nodeを使ったTypeScriptのコードの実行<a class="headerlink" href="#ts-nodetypescript" title="この見出しへのパーマリンク"></a></h2>
<p>それでは適当なコードを書いて実行してみましょう。
本来はこのコードはJavaScriptと完全互換で書けるのですが（次章で解説します）、あえて型を定義して、通常のNode.jsではエラーとなるようにしています。</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">最初のサンプルコード(first.ts)</span><a class="headerlink" href="#id12" title="このコードへのパーマリンク"></a></div>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">personName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;小心者&#39;</span><span class="p">;</span><span class="w"></span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Hello </span><span class="si">${</span><span class="nx">personName</span><span class="si">}</span><span class="sb">!`</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<p>実行するにはnpx経由でts-nodeコマンドを実行します。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ npx ts-node first.ts
Hello 小心者!
</pre></div>
</div>
<p>今後のチュートリアルでは基本的にこのスタイルで実行します。</p>
</section>
<section id="id10">
<h2>まとめ<a class="headerlink" href="#id10" title="この見出しへのパーマリンク"></a></h2>
<p>本章では次のようなことを学んで来ました。</p>
<ul class="simple">
<li><p>JavaScriptのエコシステムとpackage.json</p></li>
<li><p>サンプルを動かすための最低限の環境設定</p></li>
</ul>
<p>次章からはさっそくコーディングの仕方を学んで行きます。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="preface.html" class="btn btn-neutral float-left" title="前書き" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="variable.html" class="btn btn-neutral float-right" title="変数" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2020, Future Corporation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>